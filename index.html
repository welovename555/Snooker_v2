<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <!-- มือถือ: ปิด pinch/double-tap zoom เพื่อกดปุ่มได้ถนัด -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>นับสกอ · by Name.</title>

  <!-- ฟอนต์ไทยอ่านง่าย -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <!-- ตั้งค่า Tailwind (ต้องมาก่อนโหลด CDN) -->
  <script>
    window.tailwind = window.tailwind || {}; // กันบางบราวเซอร์
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ["Sarabun", "system-ui", "sans-serif"] },
          colors: {
            gold: { 400: "#f4d367", 500: "#f5c542", 600: "#e0a93a" },
            neon: {
              blue: "#00d4ff",
              purple: "#8b5cf6",
              pink: "#ec4899",
              green: "#10b981",
              cyan: "#06b6d4",
              orange: "#f97316",
              emerald: "#059669"
            },
          },
          boxShadow: {
            soft: "0 10px 30px rgba(0,0,0,.35)",
            glow: "0 0 0 2px rgba(255,255,255,.06), 0 10px 30px rgba(0,0,0,.45)",
            neon: "0 0 20px rgba(0, 212, 255, 0.3), 0 0 40px rgba(0, 212, 255, 0.2)",
            "neon-purple": "0 0 20px rgba(139, 92, 246, 0.3), 0 0 40px rgba(139, 92, 246, 0.2)",
            "neon-pink": "0 0 20px rgba(236, 72, 153, 0.3), 0 0 40px rgba(236, 72, 153, 0.2)",
            "neon-emerald": "0 0 20px rgba(5, 150, 105, 0.3), 0 0 40px rgba(5, 150, 105, 0.2)",
            "ultra-glow": "0 0 30px rgba(0, 212, 255, 0.4), 0 0 60px rgba(0, 212, 255, 0.3), 0 0 90px rgba(0, 212, 255, 0.2)",
          },
          keyframes: {
            floaty: { '0%,100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-6px)' } },
            shimmer: { '0%': { backgroundPosition: '0% 50%' }, '100%': { backgroundPosition: '200% 50%' } },
            pop: { '0%': { transform:'scale(.92)', opacity:.0 }, '100%': { transform:'scale(1)', opacity:1 } },
            confetti: { '0%': { transform: 'translateY(-80vh) rotate(0deg)' }, '100%': { transform: 'translateY(20vh) rotate(540deg)', opacity:.9 } },
            flare: { '0%': { opacity:.0, transform:'scale(.8)' }, '100%': { opacity:1, transform:'scale(1)' } },
            pulse: { '0%, 100%': { opacity: 1 }, '50%': { opacity: 0.7 } },
            bounce: { '0%, 100%': { transform: 'translateY(-25%)', animationTimingFunction: 'cubic-bezier(0.8,0,1,1)' }, '50%': { transform: 'none', animationTimingFunction: 'cubic-bezier(0,0,0.2,1)' } },
            glow: { '0%, 100%': { boxShadow: '0 0 20px rgba(0, 212, 255, 0.3)' }, '50%': { boxShadow: '0 0 40px rgba(0, 212, 255, 0.6), 0 0 60px rgba(0, 212, 255, 0.4)' } },
            rotate: { '0%': { transform: 'rotate(0deg)' }, '100%': { transform: 'rotate(360deg)' } },
            slideIn: { '0%': { transform: 'translateX(-100%)', opacity: 0 }, '100%': { transform: 'translateX(0)', opacity: 1 } },
            slideOut: { '0%': { transform: 'translateX(0)', opacity: 1 }, '100%': { transform: 'translateX(100%)', opacity: 0 } },
            fadeIn: { '0%': { opacity: 0, transform: 'translateY(10px)' }, '100%': { opacity: 1, transform: 'translateY(0)' } },
            scaleIn: { '0%': { transform: 'scale(0.9)', opacity: 0 }, '100%': { transform: 'scale(1)', opacity: 1 } }
          },
          animation: {
            floaty: 'floaty 4s ease-in-out infinite',
            shimmer: 'shimmer 2.2s linear infinite',
            pop: 'pop .28s ease-out both',
            flare: 'flare .4s ease-out both',
            pulse: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            bounce: 'bounce 1s infinite',
            glow: 'glow 2s ease-in-out infinite alternate',
            'spin-slow': 'rotate 3s linear infinite',
            'slide-in': 'slideIn 0.3s ease-out',
            'slide-out': 'slideOut 0.3s ease-in',
            'fade-in': 'fadeIn 0.4s ease-out',
            'scale-in': 'scaleIn 0.3s ease-out'
          }
        }
      }
    }
  </script>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- สไตล์เพิ่มจากเดิม (ย้ายออกจาก <style>) -->
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-slate-950 text-slate-100 relative overflow-x-hidden" style="font-family:'Sarabun',system-ui,-apple-system,Segoe UI,Roboto,sans-serif">
  <!-- ฉากหลังเคลื่อนไหวเบาๆ -->
  <div class="pointer-events-none fixed inset-0 -z-10 grid-anim"></div>

  <div id="app" class="min-h-screen w-full flex justify-center">
    <div class="w-full max-w-[428px] mx-auto pb-[calc(24px+env(safe-area-inset-bottom))]">
      <!-- Header / Brand -->
      <header class="sticky top-0 z-30 backdrop-blur-md bg-slate-950/80 border-b border-white/10 shadow-lg">
        <div class="px-4 py-3 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <div class="relative w-12 h-12 grid place-items-center rounded-2xl shadow-neon neon-glow" aria-hidden="true">
              <svg viewBox="0 0 64 64" class="w-12 h-12 animate-floaty" aria-hidden="true">
                <defs>
                  <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#f6e7b0"/>
                    <stop offset="55%" stop-color="#f4c95d"/>
                    <stop offset="100%" stop-color="#e7b94b"/>
                  </linearGradient>
                  <filter id="glow">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                    <feMerge>
                      <feMergeNode in="coloredBlur"/>
                      <feMergeNode in="SourceGraphic"/>
                    </feMerge>
                  </filter>
                </defs>
                <circle cx="32" cy="36" r="18" fill="url(#g)" filter="url(#glow)"/>
                <path d="M10 22 L22 14 L32 22 L42 14 L54 22 L50 30 H14 Z" fill="#f5d26a" opacity="0.95" filter="url(#glow)"/>
              </svg>
            </div>
            <div>
              <div class="text-3xl font-extrabold leading-6 gradient-text-rainbow animate-pulse">นับสกอ</div>
              <div class="text-[11px] text-slate-400 gradient-text-blue">by Name.</div>
            </div>
          </div>
          <div class="flex items-center gap-2">
            <button data-action="reset" class="px-3 py-2 rounded-xl btn-glass btn-modern hover:bg-white/20 ring-1 ring-white/10 hover:shadow-neon transition-all duration-300">
              <span class="flex items-center gap-2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.18 0 2.34-.21 3.41-.6.39-.14.64-.52.64-.94 0-.83-.94-1.36-1.63-.93-.8.5-1.74.77-2.72.77-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.85 0 1.64-.27 2.29-.72l-1.29-1.29c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0l3 3c.39.39.39 1.02 0 1.41l-3 3c-.39.39-1.02.39-1.41 0-.39-.39-.39-1.02 0-1.41l1.29-1.29c-.65.45-1.44.72-2.29.72z"/>
                </svg>
                เริ่มใหม่
              </span>
            </button>
            <button data-action="end" class="px-3 py-2 rounded-xl bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-soft btn-modern hover:shadow-neon-emerald transition-all duration-300">
              <span class="flex items-center gap-2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                จบเกมส์
              </span>
            </button>
          </div>
        </div>
      </header>

      <!-- Main -->
      <main class="px-4 space-y-4">
        <!-- Players -->
        <section class="p-4 rounded-2xl card-glass border border-white/10 shadow-glow modern-card">
          <!-- Add -->
          <div class="flex gap-2 items-center">
            <div class="relative flex-1">
              <!-- เปลี่ยนชื่อ placeholder ได้ที่นี่ -->
              <input id="nameInput" placeholder="เพิ่มผู้เล่นใหม่… (เช่น Name)" class="w-full px-4 py-3 pl-12 rounded-xl bg-white/10 border border-white/10 outline-none focus:ring-2 focus:ring-neon-blue focus:border-neon-blue transition-all duration-300 ultra-smooth" />
              <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
            </div>
            <button data-action="add-player" class="px-4 py-3 rounded-xl bg-gradient-to-r from-sky-500 to-blue-600 hover:from-sky-600 hover:to-blue-700 font-semibold shadow-soft btn-modern hover:shadow-neon transition-all duration-300">
              <span class="flex items-center gap-2">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                </svg>
                เพิ่ม
              </span>
            </button>
          </div>

          <!-- Random Player Button -->
          <div class="mt-3 flex gap-2">
            <button data-action="random-player" class="flex-1 relative overflow-hidden px-4 py-3 rounded-xl bg-gradient-to-r from-purple-600 via-pink-600 to-purple-600 hover:from-purple-700 hover:via-pink-700 hover:to-purple-700 font-semibold shadow-neon-purple btn-modern disabled:opacity-40 disabled:cursor-not-allowed transition-all duration-300">
              <span class="relative z-10 flex items-center justify-center gap-2">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="animate-spin-slow" aria-hidden="true">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                </svg>
                สุ่มผู้เล่น
              </span>
              <span class="pointer-events-none absolute inset-0 bg-gradient-to-r from-white/10 via-white/20 to-white/10 animate-shimmer [background-size:200%_100%]"></span>
            </button>
          </div>

          <!-- Random Result Display -->
          <div id="randomResult" class="mt-3 p-4 rounded-xl bg-gradient-to-r from-purple-500/20 via-pink-500/20 to-purple-500/20 border border-purple-400/30 shadow-neon-purple hidden animate-pop">
            <div class="text-center">
              <div class="text-sm text-purple-200 mb-2 flex items-center justify-center gap-2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="animate-bounce" aria-hidden="true">
                  <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                </svg>
                ผลการสุ่ม
              </div>
              <div id="randomPlayerName" class="text-2xl font-bold text-white mb-2 gradient-text-rainbow">—</div>
              <div class="text-xs text-purple-300 flex items-center justify-center gap-1">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                เริ่มเล่นก่อนคนอื่น!
              </div>
            </div>
          </div>

          <!-- Player Order Display -->
          <div id="playerOrder" class="mt-3 p-4 rounded-2xl bg-gradient-to-r from-blue-500/20 via-cyan-500/20 to-blue-500/20 border border-blue-400/30 shadow-neon hidden animate-pop">
            <div class="text-center">
              <div class="text-sm text-blue-200 mb-3 flex items-center justify-center gap-2">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                  <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                </svg>
                ลำดับการเล่น
              </div>
              <div id="orderList" class="space-y-2"></div>
            </div>
          </div>

          <!-- List -->
          <div id="playersList" class="mt-4 grid grid-cols-1 gap-3"></div>
        </section>

        <!-- Pad -->
        <section class="p-4 rounded-2xl card-glass border border-white/10 shadow-glow">
          <div class="flex items-center justify-between mb-3">
            <div class="text-sm text-slate-300">ผู้เล่นที่เลือก:</div>
            <div id="selectedName" class="font-semibold text-sky-300 truncate">—</div>
          </div>
          <!-- + Points (Ball Icons) -->
          <div>
            <div class="text-sm mb-2">เพิ่มคะแนนตามสีลูก</div>
            <div id="ballsPad" class="grid grid-cols-4 gap-3"></div>
          </div>
          <!-- Foul -4 only -->
          <div class="mt-4">
            <div class="text-sm mb-2">ฟาวล์</div>
            <button data-action="foul" class="relative overflow-hidden w-full rounded-2xl py-3 bg-rose-600 hover:bg-rose-700 active:scale-[.99] transition shadow-soft disabled:opacity-40 disabled:cursor-not-allowed">
              <span class="relative z-10">ฟาวล์ -4</span>
              <span class="pointer-events-none absolute inset-0 bg-gradient-to-r from-white/10 via-white/0 to-white/10 animate-shimmer [background-size:200%_100%]"></span>
            </button>
          </div>
        </section>

        <!-- Results Log -->
        <section class="p-4 rounded-2xl card-glass border border-white/10 shadow-glow">
          <div class="flex items-center justify-between">
            <h2 class="font-semibold">บันทึกผล</h2>
            <div id="resultsCount" class="text-xs text-slate-400">0 รายการ</div>
          </div>

          <div class="mt-3 flex flex-wrap items-center justify-between gap-3">
            <div class="flex flex-wrap items-center gap-2">
              <div class="inline-flex rounded-xl overflow-hidden ring-1 ring-white/10">
                <button data-action="filter-all" class="px-3 py-1.5 text-sm bg-white/10">ทั้งหมด</button>
                <button data-action="filter-player" class="px-3 py-1.5 text-sm hover:bg-white/10">เลือกผู้เล่น</button>
              </div>
              <select id="filterPlayer" class="px-3 py-1.5 text-sm rounded-xl bg-white/10 border border-white/10 disabled:opacity-40">
                <option value="">— เลือกผู้เล่น —</option>
              </select>
            </div>
            <div class="flex items-center gap-2" id="historyTools">
              <button data-action="history-edit-toggle" class="px-3 py-1.5 text-sm rounded-xl btn-glass hover:bg-white/20">แก้ไข</button>
              <button id="btnDeleteSelected" data-action="history-delete-selected" class="px-3 py-1.5 text-sm rounded-xl bg-rose-600 hover:bg-rose-700 hidden disabled:opacity-40" disabled>ลบที่เลือก</button>
              <button id="btnDeleteAll" data-action="history-delete-all" class="px-3 py-1.5 text-sm rounded-xl bg-rose-600/80 hover:bg-rose-600 hidden">ลบทั้งหมด</button>
              <span id="selCount" class="text-xs text-slate-400 hidden">เลือก 0 รายการ</span>
            </div>
          </div>

          <div id="resultsList" class="mt-3 space-y-2"></div>
        </section>
      </main>
    </div>
  </div>

  <!-- Centered Notice -->
  <div id="notice" class="fixed inset-0 z-[60] grid place-items-center pointer-events-none hidden">
    <div id="noticeCard" class="min-w-[280px] w-[min(92vw,420px)] px-4 py-3 rounded-2xl bg-white/10 border border-white/15 backdrop-blur animate-pop">
      <div class="flex items-center justify-center gap-2 text-xs text-slate-200">
        <svg width="14" height="14" viewBox="0 0 24 24" class="opacity-80" aria-hidden="true"><path fill="currentColor" d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2m1 15h-2v-2h2Zm0-4h-2V7h2Z"/></svg>
        <span id="noticeLabel">บันทึกการกด</span> · <span id="noticeText" class="text-emerald-300 font-semibold"></span>
      </div>
      <div id="noticeTrack" class="mt-2 h-3 rounded-full bg-white/10 relative overflow-hidden">
        <div id="noticeBar" class="absolute inset-y-0 left-0" style="width:100%"></div>
        <div id="noticeBall" class="absolute top-1/2 -translate-y-1/2 w-6 h-6 rounded-full ring-1 ring-white/40" style="left:0; transform: translateX(0)"></div>
      </div>
      <div id="noticePct" class="mt-1 text-center text-[10px] text-slate-300">0%</div>
    </div>
  </div>

  <!-- Grand Celebrate Overlay -->
  <div id="celebrate" class="fixed inset-0 z-[70] hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-slate-900/80 via-slate-800/70 to-slate-900/80 backdrop-blur-sm"></div>
    <div id="celebrateFX" class="absolute inset-0 overflow-hidden pointer-events-none"></div>
    <div class="absolute inset-0 grid place-items-center p-4">
      <div class="relative w-[min(96vw,440px)] rounded-3xl border border-white/10 shadow-2xl card-glass animate-pop">
        <div class="absolute -top-8 left-1/2 -translate-x-1/2 w-16 h-16 rounded-full grid place-items-center" aria-hidden="true">
          <svg viewBox="0 0 64 64" class="w-16 h-16 animate-floaty" aria-hidden="true">
            <defs>
              <linearGradient id="cg" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#f6e7b0"/>
                <stop offset="55%" stop-color="#f4c95d"/>
                <stop offset="100%" stop-color="#e7b94b"/>
              </linearGradient>
            </defs>
            <path d="M10 22 L22 14 L32 22 L42 14 L54 22 L50 30 H14 Z" fill="url(#cg)"/>
          </svg>
        </div>
        <div class="px-5 pt-10 pb-5 text-center">
          <h3 class="text-2xl font-extrabold gold-text">จบเกมส์</h3>
          <p id="celebrateMsg" class="mt-1 text-slate-200"></p>
          <div id="celebrateBoard" class="mt-4 text-left"></div>
          <div class="mt-5 flex items-center justify-center gap-2">
            <button data-action="celebrate-close" class="px-4 py-2 rounded-xl btn-glass hover:bg-white/20">ปิด</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Simple Modal -->
  <div id="modal" class="fixed inset-0 z-50 bg-black/60 backdrop-blur-sm grid place-items-center p-4 hidden">
    <div class="w-full max-w-sm rounded-2xl bg-slate-900 border border-white/10 shadow-2xl p-5">
      <h3 id="modalTitle" class="text-lg font-bold mb-2"></h3>
      <p id="modalMsg" class="text-slate-300"></p>
      <div class="mt-4 flex justify-end gap-2" id="modalButtons">
        <button data-action="modal-close" class="px-4 py-2 rounded-lg btn-glass hover:bg-white/20">ปิด</button>
      </div>
    </div>
  </div>

  <!-- Beautiful Confirm Dialog -->
  <div id="confirm" class="fixed inset-0 z-[80] hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-rose-900/40 via-slate-900/60 to-rose-900/40 backdrop-blur-sm"></div>
    <div class="absolute inset-0 grid place-items-center p-4">
      <div class="relative w-[min(96vw,420px)] rounded-3xl border border-white/10 shadow-2xl card-glass animate-pop">
        <div class="absolute -top-8 left-1/2 -translate-x-1/2 w-16 h-16 grid place-items-center" aria-hidden="true">
          <svg viewBox="0 0 64 64" class="w-16 h-16 animate-floaty" aria-hidden="true">
            <defs>
              <linearGradient id="dg" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#fecaca"/>
                <stop offset="60%" stop-color="#f87171"/>
                <stop offset="100%" stop-color="#ef4444"/>
              </linearGradient>
            </defs>
            <circle cx="32" cy="32" r="20" fill="url(#dg)"/>
            <path d="M32 18 v18" stroke="#1f2937" stroke-width="4" stroke-linecap="round"/>
            <circle cx="32" cy="44" r="2.5" fill="#1f2937"/>
          </svg>
        </div>
        <div class="px-5 pt-10 pb-5 text-center">
          <h3 id="confirmTitle" class="text-xl font-extrabold">ยืนยันการลบ</h3>
          <p id="confirmMsg" class="mt-2 text-slate-300">ต้องการลบข้อมูลนี้หรือไม่? การกระทำนี้ไม่สามารถย้อนกลับได้</p>
          <div class="mt-5 flex items-center justify-center gap-2">
            <button data-action="confirm-cancel" class="px-4 py-2 rounded-xl btn-glass hover:bg-white/20">ยกเลิก</button>
            <button data-action="confirm-ok" class="px-4 py-2 rounded-xl bg-rose-600 hover:bg-rose-700 shadow-soft">ยืนยันลบ</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Dev Tests (เฉพาะนักพัฒนา) -->
  <details id="dev-tests" class="px-4 py-2 select-none opacity-60">
    <summary class="cursor-pointer text-xs">Self-tests (dev)</summary>
    <pre id="testsOut" class="text-[11px] whitespace-pre-wrap"></pre>
  </details>

  <!-- แอปสคริปต์หลัก -->
  <script defer src="script.js"></script>
</body>
</html>
